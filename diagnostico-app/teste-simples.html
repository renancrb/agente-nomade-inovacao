<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Teste Simples Diagn√≥stico</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-group { margin: 15px 0; }
        label { display: block; margin: 5px 0; }
        input, textarea, select { padding: 8px; margin: 5px 0; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        .hidden { display: none; }
        .result { background: #f8f9fa; padding: 20px; border: 1px solid #ddd; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>üîß Teste Simples - Diagn√≥stico</h1>
    
    <div id="form-section">
        <h2>Formul√°rio de Teste</h2>
        <form id="test-form">
            <div class="form-group">
                <label>Nome:</label>
                <input type="text" name="nome" required>
            </div>
            
            <div class="form-group">
                <label>Empresa:</label>
                <input type="text" name="empresa">
            </div>
            
            <div class="form-group">
                <label>Contato:</label>
                <input type="text" name="contato" required>
            </div>
            
            <div class="form-group">
                <label>Q1 - Financeiro:</label>
                <label><input type="radio" name="q1" value="1"> Op√ß√£o 1</label>
                <label><input type="radio" name="q1" value="2"> Op√ß√£o 2</label>
                <label><input type="radio" name="q1" value="3"> Op√ß√£o 3</label>
                <label><input type="radio" name="q1" value="4"> Op√ß√£o 4</label>
            </div>
            
            <div class="form-group">
                <label>Q2 - Tecnologia:</label>
                <label><input type="radio" name="q2" value="1"> Op√ß√£o 1</label>
                <label><input type="radio" name="q2" value="2"> Op√ß√£o 2</label>
                <label><input type="radio" name="q2" value="3"> Op√ß√£o 3</label>
                <label><input type="radio" name="q2" value="4"> Op√ß√£o 4</label>
            </div>
            
            <div class="form-group">
                <label>Q3 - Marketing:</label>
                <label><input type="radio" name="q3" value="1"> Op√ß√£o 1</label>
                <label><input type="radio" name="q3" value="2"> Op√ß√£o 2</label>
                <label><input type="radio" name="q3" value="3"> Op√ß√£o 3</label>
                <label><input type="radio" name="q3" value="4"> Op√ß√£o 4</label>
                <label><input type="radio" name="q3" value="5"> Op√ß√£o 5</label>
            </div>
            
            <div class="form-group">
                <label>Q4 - Digital:</label>
                <label><input type="radio" name="q4" value="1"> Op√ß√£o 1</label>
                <label><input type="radio" name="q4" value="2"> Op√ß√£o 2</label>
                <label><input type="radio" name="q4" value="3"> Op√ß√£o 3</label>
                <label><input type="radio" name="q4" value="4"> Op√ß√£o 4</label>
            </div>
            
            <button type="submit">üéØ Gerar Diagn√≥stico de Teste</button>
        </form>
    </div>
    
    <div id="result-section" class="hidden">
        <div class="result">
            <h2>‚úÖ Resultado do Teste</h2>
            <div id="result-content"></div>
            <button onclick="startOver()">üîÑ Novo Teste</button>
        </div>
    </div>

    <div id="debug-info" style="background: #fff3cd; padding: 15px; margin: 20px 0; border: 1px solid #ffeaa7;">
        <h3>üîß Debug Info</h3>
        <div id="debug-log"></div>
    </div>

    <script>
        console.log('üöÄ Script carregado');
        
        function addDebugLog(message) {
            const log = document.getElementById('debug-log');
            const time = new Date().toLocaleTimeString();
            log.innerHTML += `<div>[${time}] ${message}</div>`;
            console.log(message);
        }

        document.addEventListener('DOMContentLoaded', function() {
            addDebugLog('‚úÖ DOM carregado');
            
            const form = document.getElementById('test-form');
            const formSection = document.getElementById('form-section');
            const resultSection = document.getElementById('result-section');
            
            if (!form) {
                addDebugLog('‚ùå Formul√°rio n√£o encontrado');
                return;
            }
            
            addDebugLog('‚úÖ Elementos encontrados');
            
            form.addEventListener('submit', function(e) {
                addDebugLog('üéØ Submit detectado');
                e.preventDefault();
                
                // Coletar dados
                const formData = new FormData(form);
                const dados = {};
                
                for (let [key, value] of formData.entries()) {
                    dados[key] = value;
                    addDebugLog(`üìù ${key}: ${value}`);
                }
                
                // Validar
                if (!dados.q1 || !dados.q2 || !dados.q3 || !dados.q4) {
                    addDebugLog('‚ùå Valida√ß√£o falhou - perguntas em branco');
                    alert('Responda todas as perguntas!');
                    return;
                }
                
                if (!dados.nome || !dados.contato) {
                    addDebugLog('‚ùå Valida√ß√£o falhou - dados pessoais em branco');
                    alert('Preencha nome e contato!');
                    return;
                }
                
                addDebugLog('‚úÖ Valida√ß√£o passou');
                
                // Salvar no localStorage
                try {
                    const existing = JSON.parse(localStorage.getItem('teste_diagnosticos') || '[]');
                    existing.push({
                        ...dados,
                        timestamp: new Date().toISOString(),
                        id: Date.now()
                    });
                    localStorage.setItem('teste_diagnosticos', JSON.stringify(existing));
                    addDebugLog('‚úÖ Salvo no localStorage');
                } catch (error) {
                    addDebugLog('‚ùå Erro ao salvar: ' + error.message);
                }
                
                // Mostrar resultado
                const resultContent = document.getElementById('result-content');
                resultContent.innerHTML = `
                    <h3>Dados Coletados:</h3>
                    <p><strong>Nome:</strong> ${dados.nome}</p>
                    <p><strong>Empresa:</strong> ${dados.empresa || 'N√£o informado'}</p>
                    <p><strong>Contato:</strong> ${dados.contato}</p>
                    <p><strong>Respostas:</strong> Q1=${dados.q1}, Q2=${dados.q2}, Q3=${dados.q3}, Q4=${dados.q4}</p>
                    <p><strong>Timestamp:</strong> ${new Date().toLocaleString()}</p>
                `;
                
                addDebugLog('‚úÖ Conte√∫do do resultado preenchido');
                
                // Trocar se√ß√µes
                formSection.classList.add('hidden');
                resultSection.classList.remove('hidden');
                
                addDebugLog('‚úÖ Se√ß√µes trocadas - resultado deve estar vis√≠vel');
                
                window.scrollTo(0, 0);
            });
        });
        
        function startOver() {
            addDebugLog('üîÑ Reiniciando teste');
            document.getElementById('form-section').classList.remove('hidden');
            document.getElementById('result-section').classList.add('hidden');
            document.getElementById('test-form').reset();
        }
        
        // Verificar localStorage
        window.addEventListener('load', function() {
            const saved = localStorage.getItem('teste_diagnosticos');
            if (saved) {
                const count = JSON.parse(saved).length;
                addDebugLog(`üìä ${count} testes salvos no localStorage`);
            }
        });
    </script>
</body>
</html>
